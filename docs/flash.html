<!DOCTYPE html>
<html>
<body>
    <h1>ratgdo web installer for mqtt integrations</h1>
	<h2>Choose the right version for your ratgdo hardware!</h2>
	<script src="jquery-3.6.0.min.js"></script>
	<script
	  type="module"
	  src="https://unpkg.com/esp-web-tools@9.0.5/dist/web/install-button.js?module"
	></script>
	<style type="text/css">
		* {
			font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
		}
	</style>
	
	<img src="images/mqtt_logo.png" alt="ESP Home" style="float: left; width: 75px; margin-bottom: 15px;" />
	<label for="selectManifest">Choose version:</label>
	<select id="selectManifest" onchange="setManifest()">
		<option value="">Please Choose Firmware Version:</option>
		<optgroup label="Black v2.5x Boards Only">
			<option value="flasher/manifest_v25.json">ratgdo v2.57, Security + 1.0, 2.0 & Dry Contact</option>
		</optgroup>
		<optgroup label="White v2.0 Boards Only">
			<option value="flasher/manifest_v2.json">ratgdo v2.27, Security + 2.0</option>
			<option value="flasher/manifest_v2_no_wifi.json">ratgdo v2.27, Security + 2.0 (WiFi disabled)</option>
		</optgroup>
		<optgroup label="Blue v1.0 Boards Only">
			<option value="flasher/manifest_v1.json">ratgdo v1.8, Security + 2.0</option>
			<option value="flasher/manifest_v1_no_wifi.json">ratgdo v1.8, Security + 2.0 (WiFi disabled)</option>
		</optgroup>
		<!-- <optgroup label="Debugging">
			<option value="flasher/manifest_serial_dump.json">secplus 1.0 serial dump</option>
		</optgroup> -->
		<!-- <option value="flasher/manifest_alpha.json">ratgdo v1.71a</option> -->
	</select>
    <esp-web-install-button manifest="" id="manifest"></esp-web-install-button>
	
	<hr style="clear:both" />

	<h2>Alternative Firmware</h2>
	<p>There are other excellent firmware options available for ratgdo.</p>
	<p>For a comparison of available features for the different firmware options, please refer to the <a href="https://paulwieland.github.io/ratgdo/01_features.html">feature matrix</a>.</p>

	<img src="images/esphome_logo.png" alt="ESP Home" style="float: left; width: 75px;" />
	<h3>ESPHome</h3>
	<p>The best option for Home Assistant is the ESPHome ratgdo firmware: [<a href="https://ratgdo.github.io/esphome-ratgdo/">ESPHome installer</a>]</p>
	<p>Home Assitant can be used to create HomeKit, Google and Alexa integrations, as others.</p>
	
	<img src="images/control4_logo.png" alt="Control4" style="float: left; width: 75px;" />
	<h3>Control4</h3>
	<p>Control4 integration requires the <a href="https://ratgdo.github.io/esphome-ratgdo/">ESP Home ratgdo firmware</a> as well as the driver from <a href="https://chowmain.software/drivers/control4-ratgdo">Chowmain Software</a>.</p>

	<img src="images/homekit_logo.png" alt="HomeKit" style="float: left; width: 75px; clear: left;" />
	<h3>Native HomeKit</h3>
	<p>For those who want a pure Apple HomeKit solution, install the <a href="https://ratgdo.github.io/homekit-ratgdo/flash.html">HomeKit for ratgdo firmware</a>.</p>

	<hr style="clear:both" />

	<h3>Driver and Firmware Installation Help</h3>
	<iframe width="640" height="360" src="https://youtube.com/embed/9WecAUTC9iI"></iframe>

	<h3>Drivers</h3>
	<p>If you can't connect to your ratgdo board make sure you are using a USB data cable and that you have the right driver installed for the type of board you have.</p>
	<ul>
		<li>ratgdo v2.5i uses a CH340 USB to Serial chipset. [<a href="https://www.wch-ic.com/downloads/CH341SER_EXE.html" target="_blank">driver download</a>]</li>
		<li>Most D1 Minis use an FTDI USB to Serial chipset. [<a href="https://ftdichip.com/drivers/vcp-drivers/" target="_blank">driver download</a>]</li>
	</ul>


	<h3>Downloading firmware files for OTA Updates</h3>
	<p>In order to do an OTA update, you have to download the .bin file to your computer and then upload it to the ratgdo web server.</p>
	<p>The firmware bin files are located <a href="https://github.com/ratgdo/mqtt-ratgdo/releases">under releases</a>.</p>

	<script>
		var manifest = $("#manifest").attr("manifest",`flasher/manifest.json`);

		function setManifest(){
			if($("#selectManifest").val() === ""){
				alert("Please choose a firmware from the drop down.");
				$("esp-web-install-button").hide();
			}else{
				$("esp-web-install-button").show();
			}

			$("#manifest").attr("manifest",$("#selectManifest").val());
		}

		$("esp-web-install-button").hide();
	</script>
</body>
</html>
